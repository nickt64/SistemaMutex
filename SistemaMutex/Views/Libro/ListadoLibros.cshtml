@using Shared.ViewModels



@model CreacionLibroVM

@{
    ViewData["Title"] = "Listado de Entidades Cargadas";
}

@if (TempData["mensaje"] != null)
{
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
        @TempData["mensaje"]

        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
}


<div class="container">
    <h1>Listado de Libros de la entidad</h1>

    <div class="row form-inline">

        <form asp-action="Entidades" method="get" class="form-inline ">
            <div asp-validation-summary="All"></div>
            <div class="form-inline">
                <div class="form-inline">
                    <label for="busqueda" class="control-label mr-3">CUIT:</label>

                    <input name="valor" type="text" title="Solo numeros" pattern="[0-9]{1,11}" id="busqueda" class="form-control col-6" />
                    <input type="submit" value="Buscar" class="btn btn-primary m-3" />
                </div>
            </div>
        </form>
        <a class="btn btn-primary " asp-area="" asp-controller="libro" asp-action="CrearLibro" asp-route-id=@Model.EntidadId>Nuevo ingreso</a>    
    </div>
</div>

<div>
    <table class="table-bordered table-responsive table-striped text-center m-3">
        <thead>
            <tr>
                <th>CUIT Entidad</th>
                <th>Nombre Entidad</th>
                <th>Representante Entidad</th>
                <th>Nombre Libro</th>
                <th>Tipo Libro</th>
                <th>Medio Almacenamiento</th>
                <th>Numero de Tomo</th>
                <th>Cantidad de Fojas</th>
                <th>Autorizado</th>
                <th>ID Libro</th>
                <th>Opción</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var entidad in Model.listaLibros)
            {
                <tr>
                    <td>@entidad.EntidadId</td>
                    <td>@entidad.Entidad.Nombre</td>
                    <td>@entidad.Entidad.RepEntidad</td>
                    <td>@entidad.Name</td>
                    <td>@entidad.TipoLibro</td>
                    <td>@entidad.MedioAlmacenamiento</td>
                    <td>@entidad.NumTomo</td>
                    <td>@entidad.CantFojas</td>
                    <td>@entidad.Autorizado.ToString()</td>
                    <td>@entidad.Id</td>

                    <td>
                        
                        <a asp-controller="Libro" asp-action="UpdateLibro" asp-route-id="@entidad.Id">Editar </a>|
                        <a asp-controller="Libro" asp-action="DeleteLibro" asp-route-id="@entidad.Id">Eliminar </a>|
                        <a asp-controller="Rubrica" asp-action="Rubricacion" asp-route-id="@entidad.Id">Rubricar </a>|

                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>